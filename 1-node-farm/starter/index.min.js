const fs=require("fs"),http=require("http"),url=require("url"),replaceTemplate=require("./modules/replaceTemplate"),tempOverview=fs.readFileSync(`${__dirname}/templates/template-overview.html`,"utf-8"),tempCard=fs.readFileSync(`${__dirname}/templates/template-card.html`,"utf-8"),tempProduct=fs.readFileSync(`${__dirname}/templates/template-product.html`,"utf-8"),data=fs.readFileSync(`${__dirname}/dev-data/data.json`,"utf-8"),dataObj=JSON.parse(data),server=http.createServer((req,res)=>{const{query:query,pathname:pathname}=url.parse(req.url,!0);if("/"===pathname||"/overview"===pathname){res.writeHead(200,{"Content-Type":"text/html"});const cardsHtml=dataObj.map(element=>replaceTemplate(tempCard,element)),finalHtml=tempOverview.replace("{%PRODUCT_CARDS%}",cardsHtml);res.end(finalHtml)}else if("/product"===pathname){res.writeHead(200,{"Content-Type":"text/html"});const product=dataObj[query.id],finalHtml=replaceTemplate(tempProduct,product);res.end(finalHtml)}else"/api"===pathname?(res.writeHead(200,{"Content-type":"application/json"}),res.end(data)):(res.writeHead(200,{"Content-Type":"text/plain"}),res.end("This is the DEFAULT PAGE"))});server.listen(8e3,"127.0.0.1",()=>{console.log("Listening to requests on port 8000")});